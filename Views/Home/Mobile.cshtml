@{
    ViewData["Title"] = "Mobile DataTable Demo – Readable + Horizontal Scroll";
    var scriptNonce = Html.ScriptNonce();
}

<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

<h3 style="text-align:center; margin: 10px 0 12px 0;">@ViewData["Title"]</h3>

<div class="m-table-responsive">
    <table id="mRequests"
           class="display m-datatable"
           cellspacing="0">
        <thead>
            <tr>
                <th>call<br />sign</th>
                <th>media<br />type</th>
                <th>aff1</th>
                <th>city</th>
                <th>region</th>
                <th>ctry</th>
                <th>Min<br />Media</th>
                <th>Max<br />Media</th>
                <th>Max<br />Pay</th>
                <th>Rank<br />Buys</th>
                <th>Rank<br />Orders</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

@section Scripts {

    <script nonce="@scriptNonce">
        $(function () {

            var mDemoRows = [
                { callsign: "KERO", mediaType: "TVH", aff1: "CBS", city: "Bakersfield", region: "CA", country: "USA", minMedia: 125, maxMedia: 635, maxPay: 371, rankBuys: 195, rankOrders: 294 },
                { callsign: "KABC", mediaType: "TVH", aff1: "ABC", city: "Los Angeles", region: "CA", country: "USA", minMedia: 450, maxMedia: 2200, maxPay: 1650, rankBuys: 12, rankOrders: 18 },
                { callsign: "KCBS", mediaType: "TVH", aff1: "CBS", city: "Los Angeles", region: "CA", country: "USA", minMedia: 480, maxMedia: 2400, maxPay: 1800, rankBuys: 9, rankOrders: 14 },
                { callsign: "KNBC", mediaType: "TVH", aff1: "NBC", city: "Los Angeles", region: "CA", country: "USA", minMedia: 470, maxMedia: 2350, maxPay: 1750, rankBuys: 11, rankOrders: 16 },
                { callsign: "KFOX", mediaType: "TVH", aff1: "FOX", city: "Los Angeles", region: "CA", country: "USA", minMedia: 420, maxMedia: 2100, maxPay: 1550, rankBuys: 15, rankOrders: 21 },
                { callsign: "WABC", mediaType: "TVH", aff1: "ABC", city: "New York", region: "NY", country: "USA", minMedia: 520, maxMedia: 2600, maxPay: 1950, rankBuys: 6, rankOrders: 9 },
                { callsign: "WCBS", mediaType: "TVH", aff1: "CBS", city: "New York", region: "NY", country: "USA", minMedia: 540, maxMedia: 2750, maxPay: 2050, rankBuys: 5, rankOrders: 8 },
                { callsign: "WNBC", mediaType: "TVH", aff1: "NBC", city: "New York", region: "NY", country: "USA", minMedia: 535, maxMedia: 2700, maxPay: 2000, rankBuys: 7, rankOrders: 10 },
                { callsign: "WNYW", mediaType: "TVH", aff1: "FOX", city: "New York", region: "NY", country: "USA", minMedia: 500, maxMedia: 2550, maxPay: 1900, rankBuys: 10, rankOrders: 15 },
                { callsign: "WLS", mediaType: "TVH", aff1: "ABC", city: "Chicago", region: "IL", country: "USA", minMedia: 360, maxMedia: 1850, maxPay: 1350, rankBuys: 22, rankOrders: 31 },
                { callsign: "WBBM", mediaType: "TVH", aff1: "CBS", city: "Chicago", region: "IL", country: "USA", minMedia: 370, maxMedia: 1900, maxPay: 1400, rankBuys: 20, rankOrders: 28 },
                { callsign: "WMAQ", mediaType: "TVH", aff1: "NBC", city: "Chicago", region: "IL", country: "USA", minMedia: 365, maxMedia: 1880, maxPay: 1380, rankBuys: 21, rankOrders: 29 }
            ];

            var mTable = $('#mRequests').DataTable({
                dom: 'lrtip',
                autoWidth: true,
                info: false,
                searching: false,
                responsive: false,
                paging: true,
                pageLength: 6,
                data: mDemoRows,
                columns: [
                    { data: 'callsign' },
                    { data: 'mediaType' },
                    { data: 'aff1' },
                    { data: 'city' },
                    { data: 'region' },
                    { data: 'country' },
                    { data: 'minMedia' },
                    { data: 'maxMedia' },
                    { data: 'maxPay' },
                    { data: 'rankBuys' },
                    { data: 'rankOrders' }
                ]
            });

            setTimeout(function () {
                mTable.columns.adjust();
            }, 0);

            $(window).on('resize orientationchange', function () {
                mTable.columns.adjust();
            });
        });
    </script>

}

<style nonce="@scriptNonce">
    html, body {
        width: 100%;
        max-width: 100%;
        overflow-x: hidden;
    }

    .m-table-responsive {
        width: 100%;
        max-width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        border-top: 1px solid #ccc;
        border-bottom: 1px solid #ccc;
    }

    #mRequests {
        display: table !important;
        width: auto !important; /* FIX 1 */
        min-width: 1400px !important;
        border-collapse: collapse !important;
        table-layout: fixed !important; /* FIX 2 */
        font-size: 15px !important;
        line-height: 1.4 !important;
    }

        #mRequests thead {
            display: table-header-group !important;
        }

        #mRequests tbody {
            display: table-row-group !important;
        }

        #mRequests tr {
            display: table-row !important;
        }

        #mRequests th,
        #mRequests td {
            display: table-cell !important;
            white-space: normal !important;
            padding: 8px 10px !important;
            text-align: left;
            box-sizing: border-box !important;
            vertical-align: top;
        }

        #mRequests th {
            font-weight: 600;
            text-align: center;
        }

    table#mRequests.dataTable thead th.sorting,
    table#mRequests.dataTable thead th.sorting_asc,
    table#mRequests.dataTable thead th.sorting_desc {
        background-position: right 6px center !important;
    }
</style>
