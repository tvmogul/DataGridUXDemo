@{
    ViewData["Title"] = "DataGridUXDemo";
    var scriptNonce = Html.ScriptNonce();
}

<!-- =========================
     GRID HOSTS (SEPARATED)
     ========================= -->

<div id="desktopGridHost">
    @Html.Partial("_GridDesktop")
</div>

<div id="mobileGridHost" class="hide">
    @Html.Partial("_GridMobile")
</div>

<!-- =========================
     DEVICE DETECTION + GLUE
     ========================= -->

<script nonce="@scriptNonce">
    (function () {

        function isMobileDevice() {
            return (
                navigator.maxTouchPoints > 0 ||
                window.matchMedia("(pointer: coarse)").matches ||
                window.matchMedia("(hover: none)").matches
            );
        }

        document.addEventListener("DOMContentLoaded", function () {

            const isMobile = isMobileDevice();

            const desktopHost = document.getElementById("desktopGridHost");
            const mobileHost  = document.getElementById("mobileGridHost");

            if (isMobile) {
                desktopHost.classList.add("hide");
                mobileHost.classList.remove("hide");

                if (window.initMobileGrid) {
                    window.initMobileGrid();
                }

            } else {
                mobileHost.classList.add("hide");
                desktopHost.classList.remove("hide");

                if (window.initDesktopGrid) {
                    window.initDesktopGrid();
                }
            }
        });

    })();
</script>

<!-- =========================
     VISIBILITY HELPERS
     ========================= -->

<style>
    .hide {
        display: none !important;
    }
</style>
