@{
    ViewData["Title"] = "Mobile DataTable Demo";
    var scriptNonce = Html.ScriptNonce();
}

<div id="mobileGridHost" style="display:none;">

    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

    <h3 style="text-align:center; margin: 10px 0 12px 0;">
        @ViewData["Title"]
    </h3>

    <div class="table-responsive-mobile">
        <table id="mobileTable"
               class="display"
               cellspacing="0">
            <thead>
                <tr>
                    <th style="width:8%"></th>
                    <th style="width:12%">ID</th>
                    <th style="width:12%">Az</th>
                    <th style="width:16%">Paces</th>
                    <th style="width:22%">Type</th>
                    <th style="width:16%">Dist</th>
                    <th style="width:14%">Time</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script nonce="@scriptNonce">
        $(function () {

            var demoRows = [
                { seq: 1, azimuth: 45,  paces: 60,  type: "flat",                 distance: "1.23", st: "9:41 AM" },
                { seq: 2, azimuth: 310, paces: 115, type: "uphill",               distance: "2.88", st: "9:58 AM" },
                { seq: 3, azimuth: 92,  paces: 240, type: "muddy-long-type-name", distance: "5.10", st: "10:07 AM" },
                { seq: 4, azimuth: 180, paces: 42,  type: "snow",                 distance: "0.72", st: "10:19 AM" },
                { seq: 5, azimuth: 12,  paces: 999, type: "rocky",                distance: "9.99", st: "10:44 AM" },
                { seq: 6, azimuth: 270, paces: 75,  type: "dnhill",               distance: "1.60", st: "10:51 AM" }
            ];

            var table = $('#mobileTable').DataTable({
                dom: 'lrtip',
                paging: true,
                pageLength: 6,
                searching: false,
                info: false,
                autoWidth: false,
                responsive: false,

                data: demoRows,
                columns: [
                    { data: null },
                    { data: 'seq' },
                    { data: 'azimuth' },
                    { data: 'paces' },
                    { data: 'type' },
                    { data: 'distance' },
                    { data: 'st' }
                ],
                columnDefs: [{
                    targets: 0,
                    orderable: false,
                    render: function (d, t, r, m) {
                        return m.row + 1;
                    }
                }],

                fnCreatedRow: function (nRow) {
                    var $tds = $(nRow).children('td');
                    var $ths = $('#mobileTable').find('th');

                    for (var i = 0; i < $tds.length; i++) {
                        var $td = $($tds[i]);

                        if ($td.children('.dt-clip').length === 0) {
                            $td.wrapInner('<div class="dt-clip"></div>');
                        }

                        var w = parseFloat($($ths[i]).css('width')) || 0;
                        $td.children('.dt-clip').css('max-width', (w - 6) + 'px');
                    }
                }
            });

            setTimeout(function () {
                table.columns.adjust().draw(false);
            }, 0);

            $(window).on('orientationchange', function () {
                table.columns.adjust().draw(false);
            });
        });
    </script>

    <style nonce="@scriptNonce">
        /* ===============================
                   MOBILE GRID – ISOLATED CSS
                =============================== */

        #mobileGridHost html,
        #mobileGridHost body {
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
        }

        #mobileGridHost .table-responsive-mobile {
            width: 100%;
            max-width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        #mobileGridHost table {
            border-collapse: collapse !important;
        }

        #mobileGridHost #mobileTable {
            width: auto !important;
            min-width: 1100px !important;
            table-layout: fixed;
            font-size: 14px;
        }

            #mobileGridHost #mobileTable th,
            #mobileGridHost #mobileTable td {
                white-space: nowrap !important;
                padding: 10px 8px !important;
                text-align: center;
                box-sizing: border-box;
            }

                #mobileGridHost #mobileTable td .dt-clip {
                    overflow: hidden;
                    white-space: nowrap;
                    text-overflow: ellipsis;
                    display: block;
                }

        #mobileGridHost .dataTables_wrapper {
            width: 100% !important;
        }

        #mobileGridHost .dataTables_paginate {
            text-align: center;
        }
    </style>

</div>
